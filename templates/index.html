<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RPI Stream Player</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>üé¨ RPI Stream Player</h1>
            <div class="system-info">
                <span id="cpu-temp">CPU: --¬∞C</span>
                <span id="cpu-usage">CPU: --%</span>
                <span id="mem-usage">RAM: --%</span>
            </div>
        </header>

        <main>
            <section class="stream-controls">
                <h2>Stream Configuration</h2>
                <form id="stream-form">
                    <div class="form-group">
                        <label for="stream-url">Stream URL:</label>
                        <input type="text" id="stream-url" placeholder="Enter stream URL (e.g., srt://192.168.1.100:1234)" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="stream-type">Stream Type:</label>
                        <select id="stream-type">
                            <option value="auto">Auto-detect</option>
                            <option value="srt">SRT</option>
                            <option value="rtmp">RTMP</option>
                            <option value="udp">UDP</option>
                        </select>
                    </div>
                    
                    <div class="form-actions">
                        <button type="submit" id="start-btn">‚ñ∂Ô∏è Start Stream</button>
                        <button type="button" id="stop-btn" disabled>‚èπÔ∏è Stop Stream</button>
                    </div>
                </form>
            </section>

            <section class="video-container">
                <h2>Video Output</h2>
                <div class="video-wrapper">
                    <video id="video-player" controls muted autoplay>
                        Your browser does not support the video tag.
                    </video>
                    <div id="no-stream" class="placeholder">
                        <div class="placeholder-content">
                            <div class="icon">üì∫</div>
                            <p>No active stream</p>
                            <p>Configure and start a stream to begin playback</p>
                        </div>
                    </div>
                </div>
                <div class="stream-info">
                    <span id="current-stream">No stream active</span>
                    <span id="stream-duration">Duration: 00:00</span>
                </div>
            </section>

            <section class="streams-list">
                <h2>Active Streams</h2>
                <div id="streams-container">
                    <div class="no-streams">No active streams</div>
                </div>
            </section>

            <section class="network-status">
                <h2>Network Status</h2>
                <div class="network-info">
                    <div class="network-interfaces">
                        <h3>Interfaces</h3>
                        <div id="network-interfaces">
                            <div class="interface-placeholder">Loading network status...</div>
                        </div>
                    </div>
                    <div class="network-stats">
                        <h3>Bandwidth</h3>
                        <div class="bandwidth-display">
                            <div class="bandwidth-item">
                                <span class="label">Upload:</span>
                                <span id="upload-speed">0 Mbps</span>
                            </div>
                            <div class="bandwidth-item">
                                <span class="label">Download:</span>
                                <span id="download-speed">0 Mbps</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="network-controls">
                    <button id="wifi-scan-btn" class="btn-secondary">üì° Scan WiFi</button>
                    <button id="network-diag-btn" class="btn-secondary">üîß Diagnostics</button>
                    <button id="network-optimize-btn" class="btn-primary">‚ö° Optimize</button>
                </div>
            </section>

            <section class="network-config">
                <h2>Network Configuration</h2>
                <div class="config-tabs">
                    <button class="tab-btn active" data-tab="wifi">WiFi</button>
                    <button class="tab-btn" data-tab="ethernet">Ethernet</button>
                    <button class="tab-btn" data-tab="hotspot">Hotspot</button>
                </div>
                
                <div class="tab-content active" id="wifi-tab">
                    <div class="wifi-networks" id="wifi-networks">
                        <div class="scan-placeholder">Click "Scan WiFi" to find networks</div>
                    </div>
                </div>
                
                <div class="tab-content" id="ethernet-tab">
                    <div class="ethernet-config">
                        <div class="form-group">
                            <label>Configuration Method:</label>
                            <select id="eth-method">
                                <option value="dhcp">DHCP (Automatic)</option>
                                <option value="static">Static IP</option>
                            </select>
                        </div>
                        <div class="static-config" id="static-config" style="display: none;">
                            <div class="form-group">
                                <label>IP Address:</label>
                                <input type="text" id="static-ip" placeholder="192.168.1.100">
                            </div>
                            <div class="form-group">
                                <label>Netmask:</label>
                                <input type="text" id="static-netmask" placeholder="255.255.255.0">
                            </div>
                            <div class="form-group">
                                <label>Gateway:</label>
                                <input type="text" id="static-gateway" placeholder="192.168.1.1">
                            </div>
                        </div>
                        <button class="btn-primary" id="apply-eth-config">Apply Ethernet Config</button>
                    </div>
                </div>
                
                <div class="tab-content" id="hotspot-tab">
                    <div class="hotspot-config">
                        <div class="form-group">
                            <label>Hotspot SSID:</label>
                            <input type="text" id="hotspot-ssid" value="RPI-Player">
                        </div>
                        <div class="form-group">
                            <label>Password:</label>
                            <input type="password" id="hotspot-password" value="rpiplayer123">
                        </div>
                        <div class="form-group">
                            <label>Channel:</label>
                            <select id="hotspot-channel">
                                <option value="1">1</option>
                                <option value="6" selected>6</option>
                                <option value="11">11</option>
                            </select>
                        </div>
                        <div class="hotspot-status">
                            <span id="hotspot-status-text">Hotspot: Disabled</span>
                            <button class="btn-primary" id="toggle-hotspot">Enable Hotspot</button>
                        </div>
                    </div>
                </div>
            </section>

            <section class="logs">
                <h2>System Logs</h2>
                <div id="log-container">
                    <div class="log-entry info">System ready</div>
                </div>
            </section>
        </main>
    </div>

    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>
